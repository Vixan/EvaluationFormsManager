@model CreateSectionVM

@{
    ViewData["Title"] = "CreateSection";
    int counter = 1;
}

<h2>Create Section</h2>
<hr />
<div class="row">
    <div class="col-md-10">
        <form asp-action="CreateSection">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>

            <div class="form-group">
                <label asp-for="Name" class="control-label"></label>
                <input asp-for="Name" class="form-control" />
                <span asp-validation-for="Name" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label asp-for="Description" class="control-label"></label>
                <textarea asp-for="Description" class="form-control" rows="4"></textarea>
                <span asp-validation-for="Description" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label asp-for="ImportanceId" class="control-label"></label>
                @Html.DropDownListFor(
                    model => model.ImportanceId,
                    Model.ImportanceList,
                    new { @class = "form-control selectpicker dropdown dropdown_importance" })
            </div>

            <div class="form-group panel panel-default">
                <div class="panel-heading">
                    <label asp-for="Criteria" class="control-label">Evaluation Criteria</label>
                </div>

                <table id="criteriaTable" class="table panel-body">
                    <thead class="page-header">
                        <tr class="active">
                            <th class="col-md-1">#</th>
                            <th class="col-md-5">Name</th>
                            <th class="col-md-2">Modified By</th>
                            <th class="col-md-2">Last Changed</th>
                            <th class="col-md-2">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="criteriaTableBody">
                            @foreach (var criterion in Model.Criteria)
                            {
                                <tr>
                                    <td>@counter</td>
                                    <td>@criterion.Name</td>
                                    <td>@criterion.ModifiedBy</td>
                                    <td>@criterion.ModifiedDate</td>
                                    <td>
                                        <a asp-action="" asp-route-id="@criterion.Id" class="text-info">
                                            <i class="glyphicon glyphicon-edit icon icon-lg"></i>
                                        </a>
                                        <a asp-action="" asp-route-id="@criterion.Id" class="text-danger">
                                            <i class="glyphicon glyphicon-trash icon icon-lg"></i>
                                        </a>
                                    </td>
                                </tr>

                                counter++;
                            }
                    </tbody>
                </table>

                <div class="panel-body text-center">
                    <button id="addCriterion" type="button" class="btn btn-success glyphicon-plus" data-toggle="modal" data-target="#myModal"> Add Criterion</button>
                </div>
            </div>

            <div class="form-group text-right">
                <input type="submit" class="btn btn-primary btn--submit" value="Save Section"/>
                <a asp-action="Index" class="btn btn-default">Cancel</a>
            </div>

        </form>

        
    </div>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/css/bootstrap-select.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/js/bootstrap-select.min.js"></script>

    <script type="text/javascript">
        $(function () {
            $('#addCriterion').click(function () {
                @{
                    //var newCriterion = Model.CreateCriteria();
                }
                const newCriterion = $(
                    `<tr>
                       <td>counter</td>
                        <td>newCriterion.Name</td>
                        <td>newCriterion.ModifiedBy</td>
                        <td>newCriterion.ModifiedDate</td>
                        <td>
                            <a href="Url.Action("Index","Home")" class="text-info">
                                <i class="glyphicon glyphicon-edit icon icon-lg"></i>
                            </a>
                            <a href="" class="text-danger">
                                <i class="glyphicon glyphicon-trash icon icon-lg"></i>
                            </a>
                        </td>
                    </tr>`);

                //$('#criteriaTableBody').append(newCriterion);
            });
        })
    </script>
}
